<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0053)https://reasonablypolymorphic.com/book/functions.html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <title>Functions :: Reasonably Polymorphic</title>
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
        <link href="https://reasonablypolymorphic.com/atom.xml" rel="alternate" title="Reasonably Polymorphic - Atom" type="application/atom+xml">
        <link href="https://reasonablypolymorphic.com/feed.rss" rel="alternate" title="Reasonably Polymorphic - RSS" type="application/rss+xml">

        <link href="./Functions __ Reasonably Polymorphic_files/css" rel="stylesheet" type="text/css">
        <link href="./Functions __ Reasonably Polymorphic_files/style.css" type="text/css" rel="stylesheet">
        <link href="./Functions __ Reasonably Polymorphic_files/syntax.css" type="text/css" rel="stylesheet">

        <script async="" src="./Functions __ Reasonably Polymorphic_files/analytics.js"></script><script type="text/javascript" src="./Functions __ Reasonably Polymorphic_files/jquery-2.1.4.min.js"></script>
        <script type="text/javascript" src="./Functions __ Reasonably Polymorphic_files/baseline.js"></script>
        <script type="text/x-mathjax-config;executed=true">
            MathJax.Hub.Config({
                    "HTML-CSS": {
                        scale: 50
                    },
  TeX: {extensions: [ "AMSmath.js"
                    , "AMSsymbols.js"
                    , "color.js"
                    , "http://sonoisa.github.io/xyjax_ext/xypic.js"
                    ]}
            });
        </script>
        <script src="./Functions __ Reasonably Polymorphic_files/MathJax.js" id=""></script>
          <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76834556-1', 'auto');
  ga('send', 'pageview');
  </script>

        <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
        <body><div id="MathJax_Message" style="display: none;"></div>

<div class="column">
    <article>
<header>
    <h1><a href="https://reasonablypolymorphic.com/book/functions">Functions</a></h1>
</header>
<p class="meta">
    
    <span class="prev">
        <a href="https://reasonablypolymorphic.com/book/infectiousness-of-reality">←</a>
    </span>
    
    
    <span class="next">
        <a href="https://reasonablypolymorphic.com/book/kleisli-categories">→</a>
    </span>
    
    <time>November 20, 2016</time>
    
        <span class="tags">
        
        </span>
    
</p>
<div class="content">
    <p>In the last chapter, we attempted to translate our latches (machines which “remembered” the past) into symbolic computations. We ran into problems when we noticed that attempting to evaluate an expression containing such a latch resulted in an infinite expansion – the expression never simplified down to a value. We investigated, and realized that the problem was that our machines weren’t pure functions – their outputs weren’t always the same for a given input.</p>
<p>We’d like to reconcile this, by finding ways of describing machines as symbolic computations, but allow them to still change depending on the past. The eventual solution to this problem is for us to come up with some way of describing a “context” in which such computations should be run. We can then describe the output of a latch machine as one whose context depends on the past, and our problems will be solved.</p>
<p>But we’re not ready to do that yet. Before we can dive in and directly work on that problem, we have one more kind of <em>type</em> to look at.</p>
<h2 id="function-types">Function Types</h2>
<p>Recall that we have a notation for describing the “interfaces” of machines, which we called their <strong>function signatures</strong>, or just <strong>signatures</strong> for short. As an example, the signature of <code>add1</code> was this:</p>
<pre><code>add1 : Bool -&gt; Bool -&gt; Bool -&gt; (Bool, Bool)</code></pre>
<p>Our strategy for reading these things was to take the very last type, the one after the final arrow (<code>-&gt;</code>), and to call that the <em>output</em>. The remainder of the signature was the inputs, each separated by an arrow.</p>
<p>Such a convention seemed rather suspicious, even when we first looked at it. Surely the notation should make a better distinction between things that were inputs and things that were outputs. Today we’ll look at the reasoning behind why this notation is what it is, and related things that that knowledge affords us.</p>
<p>A few chapters back, we looked at some <em>constructions on types</em> – ways of building more complicated types out of types we already had. We looked at two such examples: the <em>product</em> type <code>(a, b)</code> and the <em>sum</em> type <code>Either a b</code>. Product types corresponded to some intuition of “and” between types, and conversely, sum types were more of an “or” sort of deal.</p>
<p>As it happens, there is one more construction on types. It’s called the <strong>function type</strong> and it looks like this <code>a -&gt; b</code>. A function type from <code>a -&gt; b</code> corresponds <em>exactly</em> with your intuitions of “a machine which takes an input of type <code>a</code> and gives back some output of type <code>b</code>”. Of course, if this is a type, it must have some value, and the values of function types are exactly the machines with those signatures.</p>
<p>For example, if we are looking for a type <code>Bool -&gt; Bool</code>, one potential candidate is the machine <code>not</code>. Why? Because <code>not</code> is a function that takes a <code>Bool</code> as an input, and outputs a <code>Bool</code>. Therefore its type is <code>Bool -&gt; Bool</code>, and we can write the entire thing as</p>
<pre><code>not : Bool -&gt; Bool</code></pre>
<p>which, again, corresponds <em>exactly</em> to how we’ve been working with machines thus far. One question remains though, if a function type is of the form <code>a -&gt; b</code>, what’s up with things like <code>add1</code>, whose type is <code>Bool -&gt; Bool -&gt; Bool -&gt; (Bool, Bool)</code>?</p>
<p>In the same way that we can combine product types with themselves (eg. <code>(Bool, ((Nat, Unit), Nat))</code>), we can also combine function types with themselves. However, as we will shortly see, the order in which we combine them <em>does</em> matter. When there are no explicit parentheses in a function type, we assume they associate from the right. This means that <code>Bool -&gt; Bool -&gt; Bool -&gt; (Bool, Bool)</code>, with parentheses added, is this:</p>
<p><code>Bool -&gt; (Bool -&gt; (Bool -&gt; (Bool, Bool)))</code></p>
<p>Writing these parentheses out explicitly gives us some insight into how a machine can take more than one input. Because a function type is always of the form <code>a -&gt; b</code>, that means any particular type can take only one input, but we can “cheat” by nestling functions inside of one another.</p>
<p>If <code>a -&gt; b</code> can be described in words as the type of “a machine which takes an <code>a</code> as input, and returns a <code>b</code> as output”, then <code>a -&gt; (b -&gt; c)</code> should be described as the type of “a machine which takes an <code>a</code> as input, and <em>outputs a machine</em> that takes a <code>b</code> as input, and outputs a <code>c</code>.”</p>
<p>What? A machine that “outputs a machine”? That sounds sort of crazy, but it shouldn’t be too large of a stretch. So far, because of polymorphism, our machines have already been capable of outputting arbitrary values. All we’ve done here is acknowledged that <em>machines themselves are values</em>.</p>
<p>This is an enormously important concept, so take a few minutes to digest it. By treating machines as values, we’re doing away with our old tacit misunderstanding that values and transformations of values were <em>fundamentally different things</em>. Remember the lesson of parsimony: whenever we can make two seemingly distinct things out of one simpler thing, we should do so.</p>
<p>Moving back to continue our look at nested function types, we can create machines that require multiple inputs by building them something like this:</p>
<p><img src="data:image/svg+xml;utf8,&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;%0A&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot;%0A    &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;300.0000&quot; stroke-opacity=&quot;1&quot; viewBox=&quot;0 0 624 300&quot; font-size=&quot;1&quot; width=&quot;624.0000&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; stroke=&quot;rgb(0,0,0)&quot; version=&quot;1.1&quot;&gt;&lt;defs&gt;&lt;/defs&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;1.0&quot; font-size=&quot;32.72727272727273px&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;text dominant-baseline=&quot;middle&quot; transform=&quot;matrix(1.0000,0.0000,0.0000,1.0000,312.0000,272.7273)&quot; stroke=&quot;none&quot; text-anchor=&quot;middle&quot;&gt;And&amp;#39;&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;3.707486283919948&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 486.5455,218.1818 l -0.0000,-190.9091 h -349.0909 l -0.0000,190.9091 Z&quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;1.0&quot; font-size=&quot;21.81818181818182px&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;text dominant-baseline=&quot;middle&quot; transform=&quot;matrix(1.0000,0.0000,0.0000,1.0000,459.2727,100.9091)&quot; stroke=&quot;none&quot; text-anchor=&quot;middle&quot;&gt;c&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 404.7273,122.7273 h 54.5455 &quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 404.7273,122.7273 h 0.0000 c 0.0000,-30.1246 -24.4208,-54.5455 -54.5455 -54.5455h -76.3636 v 109.0909 h 76.3636 c 30.1246,0.0000 54.5455,-24.4208 54.5455 -54.5455Z&quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 219.2727,150.0000 h 54.5455 &quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 219.2727,95.4545 h 54.5455 &quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 164.7273,150.0000 h 54.5455 &quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;1.0&quot; font-size=&quot;21.81818181818182px&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;text dominant-baseline=&quot;middle&quot; transform=&quot;matrix(1.0000,0.0000,0.0000,1.0000,164.7273,128.1818)&quot; stroke=&quot;none&quot; text-anchor=&quot;middle&quot;&gt;b&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 110.1818,95.4545 h 109.0909 &quot;/&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;1.0&quot; font-size=&quot;21.81818181818182px&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;1.4829945135679792&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;text dominant-baseline=&quot;middle&quot; transform=&quot;matrix(1.0000,0.0000,0.0000,1.0000,110.1818,73.6364)&quot; stroke=&quot;none&quot; text-anchor=&quot;middle&quot;&gt;a&lt;/text&gt;&lt;/g&gt;&lt;g stroke-linejoin=&quot;miter&quot; stroke-opacity=&quot;1.0&quot; fill-opacity=&quot;0.0&quot; stroke=&quot;rgb(0,0,0)&quot; stroke-width=&quot;3.707486283919948&quot; fill=&quot;rgb(0,0,0)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;10.0&quot;&gt;&lt;path d=&quot;M 429.2727,193.6364 l -0.0000,-141.8182 h -234.5455 l -0.0000,141.8182 Z&quot;/&gt;&lt;/g&gt;&lt;/svg&gt;" id="currying" class="circuit"></p>
<p>In this diagram, <code>And'</code> is a machine which takes an <code>a</code>, and then outputs a machine which takes a <code>b</code> and returns a <code>c</code>. Under this scheme, the <code>a</code> provided to the outer-level machine effectively becomes “constant”, and does not change afterwards. This suggests we should be able to fill in the inputs one-at-a-time to a machine defined in this fashion. For example, imagine we have this function:</p>
<pre><code>addition : Nat -&gt; (Nat -&gt; Nat)
addition a b = a + b</code></pre>
<p>We can now provide these inputs one at a time. That means, in effect, we can “specialize” this machine, so that it is less general:</p>
<pre><code>addSeventeen : Nat -&gt; Nat
addSeventeen b = addition 17 b</code></pre>
<p>This trick is known as <strong>currying</strong>, and is named after Haskell Curry, the man who discovered that this is both a thing we <em>can</em> do, and a thing we’d actually <em>like</em> to do. Eventually we’ll run out of nested machines, and we’ll just get a usable output value back.</p>
<blockquote>
<p>Takeaway: To <em>curry</em> a function is to provide inputs to it one-at-a-time.</p>
</blockquote>
<h2 id="higher-order-functions">Higher Order Functions</h2>
<p>The notion that machines are just values to be passed around at will is a very empowering one. Not only can we <em>return machines as outputs</em>, but we can also <em>take them as inputs</em>. If we do both at once, we can <em>transform machines into other machines</em>, which is a very powerful trick indeed.</p>
<p>A simple example of this is one of “creating adapters”. Maybe you have a function that is in the “wrong shape” to be plugged in somewhere, and so you need to get it into the right form somehow. This is the logical equivalent of, say, taking a hacksaw to your electrical plug in order to get it to plug into something it maybe shouldn’t have. Fortunately, the logical case of doing this is always safe, as guaranteed by our type system.</p>
<p>As a simple example, let’s say we have a function of the form <code>a -&gt; (a -&gt; b)</code>. From here on out, most of our types will be polymorphic, since we’re just manipulating the shape of the functions, and we don’t really care what actual types they take. So we have a function of type <code>a -&gt; (a -&gt; b)</code> but we want to get it into the form <code>a -&gt; b</code>. If we don’t know what type <code>a</code> is (because it’s polymorphic and could be <em>anything</em>), then we can’t <em>curry</em> this function to get rid of one of the <code>a</code>s. Instead, we need another approach.</p>
<p>What we need, is a function to transform our function into the right “adapter” shape. Something of this form:</p>
<pre><code>adapter : (a -&gt; (a -&gt; b)) -&gt; (a -&gt; b)</code></pre>
<p>It turns out that there is exactly one function value with this type. It looks like this:</p>
<pre><code>intoBoth : (a -&gt; (a -&gt; b)) -&gt; (a -&gt; b)
intoBoth machine = adapted
  where
    adapted : a -&gt; b
    adapted a = machine a a</code></pre>
<p><code>intoBoth</code> is a <strong>higher-order</strong> machine, which means it is a machine that <em>operates on machines</em>. It takes a function of type <code>a -&gt; (a -&gt; b)</code>, and gives back a machine of type <code>a -&gt; b</code>. It does this by <em>binding</em> the input machine to <code>machine</code>, and then giving back a machine defined in the <em>where-block</em>, called <code>adapted</code>.</p>
<p>Remember, anything defined in a <em>where-block</em> keeps all of the bindings bound above it, so <code>adapted</code> knows about the <code>machine</code> given to <code>intoBoth</code>. But <code>adapted</code> is its own machine, which takes some binding <code>a</code>, and applies it to <em>both</em> of the inputs in <code>machine</code>. Try tracing which type every value has in this definition, and you’ll see that everything checks out. It’s odd, but kosher.</p>
<h2 id="revisiting-composition">Revisiting Composition</h2>
<p>We have one last interesting <em>higher-order</em> function to look at before ending this chapter. It’s a machine which formalizes the concept of “composition” we’ve been using so far – that we can combine machines together to get new machines. If you think about it, this is nothing more than a transformation over machines, and as such, should be representable as a <em>higher-order</em> machine.</p>
<pre><code>compose : (a -&gt; b) -&gt; (b -&gt; c) -&gt; (a -&gt; c)
compose m1 m2 = combined
  where
    combined : a -&gt; c
    combined a = m2 (m1 a)</code></pre>
<p>Don’t let <code>compose</code>’s type signature scare you. There are certainly a lot of arrows, and three (3!) type variables! But it’s really not so bad. The type signature says that “<code>compose</code> is a function that takes a function of type <code>a -&gt; b</code>, and another function of type <code>b -&gt; c</code>, and gives back a function of type <code>a -&gt; c</code>.</p>
<p>How does it do that? Well obviously it just hooks up the <em>output</em> of the first machine to the <em>input</em> of the second one. <code>compose</code> defines a lemma machine, <code>combined</code>, which takes an input of type <code>a</code>, and provides it as an input to <code>m1</code>. It then takes the output of that, and moves it into the input of <code>m2</code>. Because <code>m2</code> itself outputs a <code>c</code>, <code>combined</code> must also output a <code>c</code>. And so the whole thing has the right type, and therefore it must be correct!</p>
<p>Composition of functions turns out to be perhaps the most powerful concept we will visit in the course of this book – and indeed, likely ever. However, as we will see, this is not the only way of composing machines together, and composition will turn out to be the secret we’ve been looking for in order to make machine latches. We will investigate further in the next chapter.</p>
<hr>
<h2 id="exercises">Exercises</h2>
<ol style="list-style-type: decimal">
<li>There are exactly four machines (values) of type <code>Bool -&gt; Bool</code>. Build all four of their function tables, and write them as symbolic computations.</li>
<li>Write a function that curries an <code>On</code> into the first input of an <code>and</code> gate.</li>
<li>Write a function <code>compose3</code> that composes three machines together. Its type should be <code>(a -&gt; b) -&gt; (b -&gt; c) -&gt; (c -&gt; d) -&gt; (a -&gt; d)</code>.</li>
</ol>
</div>
<p class="meta">
    
    <span class="prev">
        <a href="https://reasonablypolymorphic.com/book/infectiousness-of-reality">←</a>
    </span>
    
    
    <span class="next">
        <a href="https://reasonablypolymorphic.com/book/kleisli-categories">→</a>
    </span>
    
</p>
</article>

    <nav>
    <h1><a href="https://reasonablypolymorphic.com/">REASONABLY<br>POLYMORPHIC</a></h1>

    <p> Hi there. I'm <strong>Sandy Maguire</strong>. I like improving life and
    making cool things.</p>

    <p>If you want to get in touch, I'd love to hear from you! Send me an email;
    my name is <tt>sandy</tt> and this is my website.</p>

    <h2>THINGS I MAKE</h2>
    <ul>
        <li>Code on <a href="http://github.com/isovector">github</a></li>
        <li>Essays <a href="https://reasonablypolymorphic.com/blog/archives/">archive</a></li>
        <li>Book <a href="https://reasonablypolymorphic.com/book/preface">archive</a></li>
    </ul>

    <h2>WHAT I'M DOING</h2>
    <ul>
        <li>Music at <a href="http://last.fm/user/Paamayim">last.fm</a></li>
        <li>Books at <a href="https://www.goodreads.com/review/list/14945161-sandy-maguire?shelf=currently-reading">goodreads</a></li>
        <li>Papers at <a href="https://www.mendeley.com/groups/7295141/read/papers/">mendeley</a></li>
    </ul>

    <p>
    © 2011-2016 Sandy Maguire
    </p>
</nav>

</div>
    


</body></html>